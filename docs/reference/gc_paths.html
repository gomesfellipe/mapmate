<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate a table of incremental great circle arc segments — gc_paths • mapmate</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Generate a table of incremental great circle arc segments — gc_paths" />

<meta property="og:description" content="Expand a table of great circle arcs to a larger table of great circle arc segments that sequentially traverse the original arcs." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mapmate</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/mapmate.html">
    <span class="fa fa-info fa-lg"></span>
     
    Introduction
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-globe fa-lg"></span>
     
    Visual examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/usage_and_limitations.html">Usage &amp; limitations</a>
    </li>
    <li>
      <a href="../articles/networks.html">Network maps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/ffmpeg.html">
    <span class="fa fa-play-circle-o fa-lg"></span>
     
    ffmpeg
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book fa-lg"></span>
     
    Reference
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leonawicz/mapmate">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a table of incremental great circle arc segments</h1>
    <small class="dont-index">Source: <a href='https://github.com/leonawicz/mapmate/blob/master/R/networks.R'><code>R/networks.R</code></a></small>
    <div class="hidden name"><code>gc_paths.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Expand a table of great circle arcs to a larger table of great circle arc segments that sequentially traverse the original arcs.</p>
    
    </div>

    <pre class="usage"><span class='fu'>gc_paths</span>(<span class='no'>data</span>, <span class='no'>group</span>, <span class='no'>size</span>, <span class='kw'>replicates</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>direction</span> <span class='kw'>=</span> <span class='st'>"fixed"</span>,
  <span class='kw'>max.offset</span> <span class='kw'>=</span> <span class='fl'>0</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a data frame.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>character, the column in <code>data</code> referring to the grouping variable.</p></td>
    </tr>
    <tr>
      <th>size</th>
      <td><p>integer, the maximum number of points used to define a great circle arc segment.</p></td>
    </tr>
    <tr>
      <th>replicates</th>
      <td><p>integer, the number of replicates of an arc. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>direction</th>
      <td><p>character. Defaults to <code>fixed</code>.</p></td>
    </tr>
    <tr>
      <th>max.offset</th>
      <td><p>integer, maximum allowable offset for the plot frame on which great circle arc path traversal commences.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data frame.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>gc_paths</code> takes a data frame as generated by <code>gc_arcs</code> and breaks each set of points defining each arc
into a sequence of points defining arc segments that cover the entire original arc in order from one endpoint to the other.
Segments along the path that covers an arc may overlap to varying degrees based on the segment size, which is variable.</p>
<p><code>group</code> keeps different network pathways distinct within each plot frame when multiple great circle arcs are traversed simultaneously.</p>
<p><code>size</code> describes the maximum number of points composing a great circle arc segment.
It must be at least <code>2</code> and is used to sample integers uniformly between \([2, size]\).
This defines the range of values from which the actual segment length is sampled. There are not any other options in the current package version for specifying segment lengths.
Length is also fixed across all segments in a given arc, but is allowed to vary between arcs.</p>
<p><code>replicates</code> simply duplicates a sequence of segments for a given arc, which are then allowed to commence path traversal during unique plot frames
based on <code>max.offset</code>. For example, if <code>replicates=2</code> and <code>max.offset=2</code>,
two instances of the same arc segment path sequence for a specific arc can begin on plot frames <code>0</code>, <code>1</code>, or <code>2</code>.
<code>max.offset</code> must be at least <code>replicates - 1</code>.</p>
<p>For <code>direction="fixed"</code>, no change are made to <code>data</code>.
<code>direction="reverse"</code> will switch the order of the points in the arc and <code>direction="random"</code> gives a probability of 0.5 that order is reversed.
This is useful in the context of applying <code>gc_paths</code> over multiple great circle arcs as well as for simulations.</p>
<p>In the context of animating a sequence of plot frames, and holding other factors constant,
the general rule of thumb is animations will appear to traverse the path of longer great circle arcs with greater speed than of shorter great circle arcs,
taking about the same amount of time (number of frames) to complete the journey from endpoint to endpoint because each arc is composed of the same number of points.
On the other hand, the more points an arc consists of, the slower it will be traversed.
Another factor is the length of each segment along the path of the arc and how much each successive segment is allowed to overlap the previous one from one plot to the next.
See <code>gc_arcs</code> regarding generating great circle arcs composed of varying numbers of points.</p>
<p>Overall, there is an interplay between the number of points composing an entire arc, the segment length (number of points composing the successive subsets of an arc),
and degree of segment overlap (how the arc is broken into segments to trace the path along the arc).
Longer segments made up of more points means the arc is traversed more quickly.
More segment overlap will slow down the journey.
More points composing the entire arc shrinks the distance covered by each segment.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>set.seed</span>(<span class='fl'>192</span>)
<span class='fu'>data</span>(<span class='no'>network</span>)
<span class='no'>distFun</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fl'>1</span> - <span class='no'>x</span> / <span class='fu'>max</span>(<span class='no'>x</span>) <span class='co'># simple inverse distance weighting</span>
<span class='no'>endpoints</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gc_endpoints.html'>gc_endpoints</a></span>(<span class='no'>network</span>, <span class='st'>"lon"</span>, <span class='st'>"lat"</span>)
<span class='no'>endpoints</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='no'>endpoints</span>, <span class='kw'>Dist_wts</span><span class='kw'>=</span><span class='fu'>distFun</span>(<span class='no'>Dist</span>))

<span class='co'># take a weighted sample, e.g., favoring larger averaged populations and shorter distances</span>
<span class='no'>endpoints</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/sample.html'>sample_n</a></span>(<span class='no'>endpoints</span>, <span class='fl'>500</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>weight</span><span class='kw'>=</span>(<span class='no'>Pop_wts0</span> + <span class='no'>Pop_wts1</span>)/<span class='fl'>2</span> + <span class='no'>Dist_wts</span>)

<span class='co'># expand data frame from endpoints to arcs, each composed of a sequence of points</span>
<span class='no'>arcs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='gc_arcs.html'>gc_arcs</a></span>(<span class='no'>endpoints</span>, <span class='st'>"lon0"</span>, <span class='st'>"lat0"</span>, <span class='st'>"lon1"</span>, <span class='st'>"lat1"</span>)

<span class='no'>paths</span> <span class='kw'>&lt;-</span> <span class='fu'>gc_paths</span>(<span class='no'>arcs</span>, <span class='kw'>group</span><span class='kw'>=</span><span class='st'>"group"</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>5</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matthew Leonawicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

